<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>18 & Sans Limite ğŸ‰</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

<h1>ğŸ‚ 18 & Sans Limite ğŸ”¥</h1>

{% if not gage %}
    <form method="POST">
        <input type="text" name="numero" placeholder="Entre ton numÃ©ro" required>
        <br><br>
        <button type="submit">Entrer ğŸ‰</button>
    </form>

{% else %}

    <a href="/admin">
        <button>ğŸ† Voir le classement</button>
    </a>

    <h2>Ton dÃ©fi :</h2>
    <p class="gage">
        {{ gage["texte"] }} <br>
        <strong>+{{ gage["points"] }} points ğŸ¯</strong>
    </p>

    <a href="/">
        <button>â¬… Retour</button>
    </a>

    <form action="/valider" method="POST">
        <input type="hidden" name="numero" value="{{ numero }}">
        <button type="submit">DÃ©fi rÃ©alisÃ© âœ…</button>
    </form>

    <form action="/" method="GET">
        <button type="submit">ğŸ² Donner un nouveau gage</button>
    </form>

    <h3>ğŸ“œ DÃ©fis rÃ©alisÃ©s :</h3>
    <ul>
        {% for h in historique %}
            <li>{{ h["texte_gage"] }} (+{{ h["points"] }} pts)</li>
        {% endfor %}
    </ul>

{% endif %}

<hr>

<h2>ğŸ† Classement</h2>

{% if classement and classement|length > 0 %}
<div class="podium">

    {% if classement|length > 1 %}
    <div class="second place">
        ğŸ¥ˆ<br>
        {{ classement[1]["numero"] }}<br>
        {{ classement[1]["score"] }} pts
    </div>
    {% endif %}

    <div class="first place">
        ğŸ¥‡<br>
        {{ classement[0]["numero"] }}<br>
        {{ classement[0]["score"] }} pts
    </div>

    {% if classement|length > 2 %}
    <div class="third place">
        ğŸ¥‰<br>
        {{ classement[2]["numero"] }}<br>
        {{ classement[2]["score"] }} pts
    </div>
    {% endif %}

</div>
{% endif %}

{% if classement and classement|length > 3 %}
<h3>Autres joueurs</h3>
<table>
    <tr>
        <th>Position</th>
        <th>NumÃ©ro</th>
        <th>Score</th>
    </tr>
    {% for joueur in classement[3:] %}
    <tr>
        <td>{{ loop.index + 3 }}</td>
        <td>{{ joueur["numero"] }}</td>
        <td>{{ joueur["score"] }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}

<script>
if (window.location.search.includes("confetti=1")) {
    confetti({
        particleCount: 200,
        spread: 90,
        origin: { y: 0.6 }
    });
}

{% if confetti %}
confetti({
    particleCount: 200,
    spread: 80,
    origin: { y: 0.6 }
});
{% endif %}
</script>

</body>
</html>
